(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{187:function(e,t){},194:function(e,t){},218:function(e,t){},5711:function(e,t,a){e.exports=a(6270)},5716:function(e,t,a){},6151:function(e,t,a){},6173:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},6174:function(e,t){},6270:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(134),o=a.n(c),i=(a(5716),a(33)),s=a(42),l=a(44),u=a(43),p=a(45),d=a(347),h=a.n(d),m=a(64),f=a.n(m),w=a(348),v=a(135),b=a.n(v),k=a(486),g=a(56),O=a.n(g),y=a(38),j=a(6281),E=a(6283),S=(a(6149),a(6151),a(7)),I=a.n(S),A=a(19),x={aws_appsync_graphqlEndpoint:"https://axlvk4nfzbf5fnfmpqo37uzdey.appsync-api.ap-northeast-2.amazonaws.com/graphql",aws_appsync_region:"ap-northeast-2",aws_appsync_authenticationType:"AMAZON_COGNITO_USER_POOLS",aws_appsync_apiKey:"null"},C=new b.a({url:x.aws_appsync_graphqlEndpoint,region:x.aws_appsync_region,auth:{type:x.aws_appsync_authenticationType,apiKey:x.apiKey,jwtToken:function(){var e=Object(A.a)(I.a.mark(function e(){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.Auth.currentSession();case 2:return e.abrupt("return",e.sent.getIdToken().getJwtToken());case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}}),T=window.chrome,_=window.location.origin;T&&T.identity&&(_=T.identity.getRedirectURL());var P={Auth:{identityPoolId:"ap-northeast-2:f7fdd6bf-dc3f-40a2-99f4-56351072c3bf",region:"ap-northeast-2",identityPoolRegion:"ap-northeast-2",userPoolId:"ap-northeast-2_dOcKtjnwU",userPoolWebClientId:"5qbr4et22vf5pb8m5k0j7kp9u7",mandatorySignIn:!0,authenticationFlowType:"USER_SRP_AUTH",oauth:{domain:"ezmote.auth.ap-northeast-2.amazoncognito.com",scope:["email","openid","aws.cognito.signin.user.admin","profile"],redirectSignIn:_,redirectSignOut:_,responseType:"code",options:{AdvancedSecurityDataCollectionFlag:!0}}}},N=a(6282),U=a(136),B=Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_SHOW_DEBUG,R=Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_SHOW_DEBUG_TOAST,F=(new function e(){Object(i.a)(this,e),this.info=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];B&&console.log.apply(console,t),R&&Object(U.toast)(JSON.stringify(t))},this.log=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];B&&console.log.apply(console,t),R&&Object(U.toast)(JSON.stringify(t))},this.debug=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];B&&console.log.apply(console,t),R&&Object(U.toast)(JSON.stringify(t))}},r.a.createElement(U.ToastContainer,{autoClose:3e3,hideProgressBar:!0})),D=window.chrome,W=(n.Component,a(492),a(47)),q=a.n(W),M="mutation Command($watchId: ID, $command: String!, $amount: Float) {\n  command(watchId: $watchId, command: $command, amount: $amount) {\n    id\n    userId\n    createdAt\n    updatedAt\n    title\n    url\n    state\n    adState\n    timestamp\n    totalTime\n    command\n    amount\n  }\n}\n",L="query GetWatch {\n  getWatch {\n    id\n    userId\n    createdAt\n    updatedAt\n    title\n    url\n    state\n    adState\n    timestamp\n    totalTime\n    command\n    amount\n  }\n}\n",z=(a(6172),a(495)),H=a(6280);function J(e,t,a){return O.a.chain(a).keyBy().mapValues(function(a){if(!e||e[a]!==t[a])return t[a]}).omitBy(O.a.isNil).value()}function $(e){var t="";return(e=Math.floor(e))>3600&&(t+=Math.floor(e/60/60)+":"),t+=Math.floor(e/60)+":",t+=O.a.padStart(e%60,2,"0")}var G="subscription SubscribeToUpdateWatch {\n  subscribeToUpdateWatch {\n    id\n    userId\n    createdAt\n    updatedAt\n    title\n    url\n    state\n    adState\n    timestamp\n    totalTime\n    command\n    amount\n  }\n}\n",K=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).setInterval=function(e){a.clearInterval(),a.intervalId=setInterval(e,1e3)},a.clearInterval=function(){a.intervalId&&clearInterval(a.intervalId),a.intervalId=null},a.handleClickBackward=Object(A.a)(I.a.mark(function e(){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.props.client.mutate({mutation:q()(M),variables:{command:"backward",amount:5}});case 2:case"end":return e.stop()}},e,this)})),a.handleClickForward=Object(A.a)(I.a.mark(function e(){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.props.client.mutate({mutation:q()(M),variables:{command:"forward",amount:5}});case 2:case"end":return e.stop()}},e,this)})),a.handleClickNext=Object(A.a)(I.a.mark(function e(){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.props.client.mutate({mutation:q()(M),variables:{command:"next",amount:1}});case 2:case"end":return e.stop()}},e,this)})),a.state={watch:e.watch},a.setupTimer(),a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(e,t){this.props.watch.updatedAt!==t.watch.updatedAt&&(console.log("componentDidUpdate:",this.props.watch),this.setState({watch:this.props.watch}),this.clearInterval(),this.setupTimer())}},{key:"componentWillUnmount",value:function(){this.clearInterval()}},{key:"setupTimer",value:function(){var e=this,t=this.state.watch;"playing"===t.state||"willplay"===t.state?this.setInterval(function(){e.state.watch.timestamp+=1,e.setState({watch:e.state.watch})}):this.clearInterval()}},{key:"render",value:function(){var e=this.state.watch;return e&&r.a.createElement(H.a,null,r.a.createElement(H.a,null,r.a.createElement("h4",null,"Watching: ",e.title," (",e.state,") ",$(e.timestamp))),r.a.createElement(H.a,null,r.a.createElement(N.a,{onClick:this.handleClickBackward},"backward"),r.a.createElement(N.a,{onClick:this.handleClickForward},"forward"),r.a.createElement(N.a,{onClick:this.handleClickNext},"next")))}}]),t}(n.Component),V=(n.Component,a(6173),a(6174),a(496)),Q=a(79),Z=a.n(Q),X=a(66),Y=a.n(X),ee=a(6248),te=a(179),ae=a.n(te),ne=a(67),re=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.sub,a=e.query,n=e.children,c=O.a.lowerFirst(t.definitions[0].name.value),o=O.a.lowerFirst(a.definitions[0].name.value);return r.a.createElement(y.Subscription,{subscription:t},function(e){var t=e.loading,i=e.error,s=e.data;return t?r.a.createElement(y.Query,{query:a},function(e){var t=e.loading,a=e.error,r=e.data;return n({loading:t,error:a,data:r&&r[o]})}):n({loading:t,error:i,data:s&&s[c]})})}}]),t}(n.PureComponent),ce=a(65),oe=["currentTime"],ie=.5,se=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state=Object(V.a)({},J(null,a.props,oe)),a.handleClose=function(){a.setState({open:!1})},a.handleClick=function(){a.setState({open:!0})},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(){this.setState(J(this.state,this.props,oe))}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.totalTime,n=e.title,c=this.state.currentTime;return r.a.createElement("div",{className:t.root},r.a.createElement(Z.a,{container:!0},r.a.createElement(Z.a,{item:!0}),r.a.createElement(Z.a,{item:!0,container:!0,direction:"column"},r.a.createElement(Z.a,{item:!0},r.a.createElement(Y.a,{disabled:this.adShowing,onClick:this.props.onBackward},r.a.createElement(ne.b,null)),this.stopped?r.a.createElement(Y.a,{onClick:this.props.onResume},r.a.createElement(ne.e,{fontSize:"large"})):r.a.createElement(Y.a,{onClick:this.props.onPause},r.a.createElement(ne.d,{fontSize:"large"})),this.adShowing?r.a.createElement(Y.a,{onClick:this.props.onSkipAd},r.a.createElement(ne.a,null)):r.a.createElement(Y.a,{onClick:this.props.onForward},r.a.createElement(ne.a,null))),r.a.createElement(Z.a,{item:!0},r.a.createElement(Y.a,{onClick:this.props.onPrev},r.a.createElement(ne.g,null)),r.a.createElement(Y.a,{onClick:this.props.onNext},r.a.createElement(ne.f,null)))),r.a.createElement(Z.a,{container:!0,item:!0},r.a.createElement(Z.a,{item:!0,container:!0},r.a.createElement(ae.a,{variant:"subtitle2"},$(c)),r.a.createElement(ae.a,{variant:"subtitle2"},$(a)),r.a.createElement(Y.a,null,r.a.createElement(ne.c,null))))),r.a.createElement(ae.a,{variant:"subtitle1"},n))}},{key:"stopped",get:function(){return"paused"===this.props.state}},{key:"adShowing",get:function(){return"1"===this.props.adState}}]),t}(n.PureComponent),le=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={watch:a.props.watch},a.setupTimer=function(){var e=a.state.watch;"playing"===e.state||"willplay"===e.state?a.setInterval(function(){a.setState(Object(ce.a)(function(e){e.watch.timestamp+=ie}))}):a.clearInterval()},a.setInterval=function(e){a.clearInterval(),a.intervalId=setInterval(e,1e3*ie)},a.clearInterval=function(){a.intervalId&&clearInterval(a.intervalId),a.intervalId=null},a.handlePause=Object(A.a)(I.a.mark(function e(){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.setState(Object(ce.a)(function(e){e.watch.state="paused"})),a.props.onPause();case 2:case"end":return e.stop()}},e,this)})),a.handleResume=Object(A.a)(I.a.mark(function e(){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.setState(Object(ce.a)(function(e){e.watch.state="willplay"})),a.props.onResume();case 2:case"end":return e.stop()}},e,this)})),a.handleBackward=Object(A.a)(I.a.mark(function e(){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.setState(Object(ce.a)(function(e){e.watch.timestamp-=10})),a.props.onBackward();case 2:case"end":return e.stop()}},e,this)})),a.handleForward=Object(A.a)(I.a.mark(function e(){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.setState(Object(ce.a)(function(e){e.watch.timestamp+=10})),a.props.onForward();case 2:case"end":return e.stop()}},e,this)})),a.handlePrev=Object(A.a)(I.a.mark(function e(){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.setState(Object(ce.a)(function(e){e.watch.title="..."})),a.props.onPrev();case 2:case"end":return e.stop()}},e,this)})),a.handleNext=Object(A.a)(I.a.mark(function e(){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.setState(Object(ce.a)(function(e){e.watch.title="..."})),a.props.onNext();case 2:case"end":return e.stop()}},e,this)})),a.handleSkipAd=Object(A.a)(I.a.mark(function e(){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.setState(Object(ce.a)(function(e){e.watch.title="..."})),a.props.onSkipAd();case 2:case"end":return e.stop()}},e,this)})),a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.setupTimer()}},{key:"componentDidUpdate",value:function(e,t){this.props.watch.updatedAt!==t.watch.updatedAt&&(this.setState({watch:this.props.watch}),this.clearInterval(),this.setupTimer())}},{key:"componentWillUnmount",value:function(){this.clearInterval()}},{key:"render",value:function(){var e=this.props.classes,t=this.state.watch;return r.a.createElement(se,{classes:e,title:t.title,currentTime:t.timestamp,totalTime:t.totalTime,state:t.state,adState:t.adState,onResume:this.handleResume,onPause:this.handlePause,onBackward:this.handleBackward,onForward:this.handleForward,onPrev:this.handlePrev,onNext:this.handleNext,onSkipAd:this.handleSkipAd})}}]),t}(n.Component),ue=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handlePause=Object(A.a)(I.a.mark(function e(){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.command({variables:{command:"pause"}});case 1:case"end":return e.stop()}},e,this)})),a.handleResume=Object(A.a)(I.a.mark(function e(){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.command({variables:{command:"play"}});case 1:case"end":return e.stop()}},e,this)})),a.handleBackward=Object(A.a)(I.a.mark(function e(){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.command({variables:{command:"backward",amount:10}});case 1:case"end":return e.stop()}},e,this)})),a.handleForward=Object(A.a)(I.a.mark(function e(){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.command({variables:{command:"forward",amount:10}});case 1:case"end":return e.stop()}},e,this)})),a.handlePrev=Object(A.a)(I.a.mark(function e(){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.command({variables:{command:"prev",amount:1}});case 1:case"end":return e.stop()}},e,this)})),a.handleNext=Object(A.a)(I.a.mark(function e(){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.command({variables:{command:"next",amount:1}});case 1:case"end":return e.stop()}},e,this)})),a.handleSkipAd=Object(A.a)(I.a.mark(function e(){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.command({variables:{command:"skipAd"}});case 1:case"end":return e.stop()}},e,this)})),a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement(y.Mutation,{mutation:q()(M)},function(a,n){var c=n.data;return e.command=a,console.log(c),r.a.createElement(re,{sub:q()(G),query:q()(L)},function(a){var n=a.loading,c=a.error,o=a.data;if(n)return null;if(c)return c;var i=o;return r.a.createElement(le,{classes:t,watch:i,onResume:e.handleResume,onPause:e.handlePause,onBackward:e.handleBackward,onForward:e.handleForward,onPrev:e.handlePrev,onNext:e.handleNext,onSkipAd:e.handleSkipAd})})})}}]),t}(n.Component),pe=Object(ee.withStyles)(function(e){return{root:{textAlign:"center",paddingTop:20*e.spacing.unit}}})(ue),de=a(350),he=Object(ee.createMuiTheme)({palette:{primary:de.red,secondary:de.blue},typography:{useNextVariants:!0}}),me=window.chrome,fe=O.a.get(me,"runtime.sendMessage",function(){console.log("No chromeSendMessage")});f.a.configure(x),f.a.configure(P);var we=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(j.a,null,r.a.createElement("div",{className:"App"},F,r.a.createElement(pe,null),r.a.createElement(E.a,{path:"/controller",component:pe})))}}]),t}(n.Component),ve=Object(w.withAuthenticator)(function(){return r.a.createElement(h.a,{theme:he},r.a.createElement(we,null))},!0,[r.a.createElement(w.FederatedSignIn,null)],{}),be=function(){return r.a.createElement(y.ApolloProvider,{client:C},r.a.createElement(k.Rehydrated,null,r.a.createElement(ve,null)))},ke=new m.Logger("Alexander_the_auth_watcher");fe("ceajhbhbmjohgamoihofcimhnmfhkmhp",{event:"WEB_LOADED"},function(e){console.log(e)}),ke.onHubCapsule=function(e){switch(console.log(e),fe("ceajhbhbmjohgamoihofcimhnmfhkmhp",{event:"AUTH_UPDATED",capsule:e},function(e){console.log(e)}),O.a.get(me,"runtime,reload",function(){})(),e.payload.event){case"signIn":ke.info("user signed in");break;case"signUp":ke.info("user signed up");break;case"signOut":ke.info("user signed out");break;case"signIn_failure":ke.info("user sign in failed");break;case"configured":ke.info("the Auth module is configured");break;default:ke.info(e.payload.event)}},m.Hub.listen("auth",ke),o.a.render(r.a.createElement(be,null),document.getElementById("root"))}},[[5711,2,1]]]);
//# sourceMappingURL=main.72f96317.chunk.js.map