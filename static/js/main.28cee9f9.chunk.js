(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{186:function(e,t){},193:function(e,t){},217:function(e,t){},5710:function(e,t,n){e.exports=n(6269)},5715:function(e,t,n){},6150:function(e,t,n){},6172:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},6173:function(e,t){},6269:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(133),c=n.n(o),i=(n(5715),n(45)),l=n(55),s=n(57),u=n(56),p=n(58),m=n(255),d=n.n(m),h=n(63),f=n.n(h),w=n(257),v=n(134),g=n.n(v),b=n(486),y=n(73),E=n.n(y),k=n(46),O=n(6286),j=n(6288),I=(n(6148),n(6150),n(25)),_=n.n(I),A=n(51),C={aws_appsync_graphqlEndpoint:"https://axlvk4nfzbf5fnfmpqo37uzdey.appsync-api.ap-northeast-2.amazonaws.com/graphql",aws_appsync_region:"ap-northeast-2",aws_appsync_authenticationType:"AMAZON_COGNITO_USER_POOLS",aws_appsync_apiKey:"null"},x=new g.a({url:C.aws_appsync_graphqlEndpoint,region:C.aws_appsync_region,auth:{type:C.aws_appsync_authenticationType,apiKey:C.apiKey,jwtToken:function(){var e=Object(A.a)(_.a.mark(function e(){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.Auth.currentSession();case 2:return e.abrupt("return",e.sent.getIdToken().getJwtToken());case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}}),T=window.chrome,S=window.location.origin;T&&T.identity&&(S=T.identity.getRedirectURL());var U={Auth:{identityPoolId:"ap-northeast-2:f7fdd6bf-dc3f-40a2-99f4-56351072c3bf",region:"ap-northeast-2",identityPoolRegion:"ap-northeast-2",userPoolId:"ap-northeast-2_dOcKtjnwU",userPoolWebClientId:"5qbr4et22vf5pb8m5k0j7kp9u7",mandatorySignIn:!0,authenticationFlowType:"USER_SRP_AUTH",oauth:{domain:"ezmote.auth.ap-northeast-2.amazoncognito.com",scope:["email","openid","aws.cognito.signin.user.admin","profile"],redirectSignIn:S,redirectSignOut:S,responseType:"code",options:{AdvancedSecurityDataCollectionFlag:!0}}}},N=n(6287),P=n(135),B=Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_SHOW_DEBUG,R=Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_SHOW_DEBUG_TOAST,D=new function e(){Object(i.a)(this,e),this.info=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];B&&console.log.apply(console,t),R&&Object(P.toast)(JSON.stringify(t))},this.log=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];B&&console.log.apply(console,t),R&&Object(P.toast)(JSON.stringify(t))},this.debug=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];B&&console.log.apply(console,t),R&&Object(P.toast)(JSON.stringify(t))}},L=r.a.createElement(P.ToastContainer,{autoClose:3e3,hideProgressBar:!0}),W=window.chrome,F=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).oAuthLogin=function(){if(W.identity){var e=W.identity.getRedirectURL();W.identity.launchWebAuthFlow({url:function(e){return"https://ezmote.auth.ap-northeast-2.amazoncognito.com/login?response_type=code&client_id=5qbr4et22vf5pb8m5k0j7kp9u7&scope=aws.cognito.signin.user.admin+email+openid+profile&redirect_uri=".concat(e)}(e+""),interactive:!0},function(e){W.identity.getProfileUserInfo(function(e){return console.log(e)}),W.identity.getAuthToken({},function(e){return console.log(e)}),h.Auth._cognitoAuthClient.parseCognitoWebResponse(e)})}},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(N.a,{onClick:this.oAuthLogin},"Login"))}}]),t}(a.Component),z=(n(492),n(33)),q=n.n(z),M="mutation Command($command: String!, $amount: Float) {\n  command(command: $command, amount: $amount) {\n    id\n    userId\n    createdAt\n    updatedAt\n    title\n    url\n    state\n    timestamp\n    command\n    amount\n  }\n}\n",J="query GetWatch {\n  getWatch {\n    id\n    userId\n    createdAt\n    updatedAt\n    title\n    url\n    state\n    timestamp\n    command\n    amount\n  }\n}\n",H=(n(6171),n(256)),G=n(6285);function K(e){var t="";return(e=Math.floor(e))>3600&&(t+=Math.floor(e/60/60)+":"),t+=Math.floor(e/60)+":",t+=E.a.padStart(e%60,2,"0")}var V=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).setInterval=function(e){n.clearInterval(),n.intervalId=setInterval(e,1e3)},n.clearInterval=function(){n.intervalId&&clearInterval(n.intervalId),n.intervalId=null},n.handleClickBackward=Object(A.a)(_.a.mark(function e(){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.client.mutate({mutation:q()(M),variables:{command:"backward",amount:5}});case 2:case"end":return e.stop()}},e,this)})),n.handleClickForward=Object(A.a)(_.a.mark(function e(){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.client.mutate({mutation:q()(M),variables:{command:"forward",amount:5}});case 2:case"end":return e.stop()}},e,this)})),n.handleClickNext=Object(A.a)(_.a.mark(function e(){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.client.mutate({mutation:q()(M),variables:{command:"next",amount:1}});case 2:case"end":return e.stop()}},e,this)})),n.state={watch:e.watch},n.setupTimer(),n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e,t){this.props.watch.updatedAt!==t.watch.updatedAt&&(console.log("componentDidUpdate:",this.props.watch),this.setState({watch:this.props.watch}),this.clearInterval(),this.setupTimer())}},{key:"componentWillUnmount",value:function(){this.clearInterval()}},{key:"setupTimer",value:function(){var e=this,t=this.state.watch;"playing"===t.state||"willplay"===t.state?this.setInterval(function(){e.state.watch.timestamp+=1,e.setState({watch:e.state.watch})}):this.clearInterval()}},{key:"render",value:function(){var e=this.state.watch;return e&&r.a.createElement(G.a,null,r.a.createElement(G.a,null,r.a.createElement("h4",null,"Watching: ",e.title," (",e.state,") ",K(e.timestamp))),r.a.createElement(G.a,null,r.a.createElement(N.a,{onClick:this.handleClickBackward},"backward"),r.a.createElement(N.a,{onClick:this.handleClickForward},"forward"),r.a.createElement(N.a,{onClick:this.handleClickNext},"next")))}}]),t}(a.Component),$=(a.Component,n(6172),n(6173),n(495)),Q=n(76),Z=n.n(Q),X=n(77),Y=n(99),ee=n.n(Y),te=n(178),ne=n.n(te),ae=n(6247);function re(e,t,n){return E.a.chain(n).keyBy().mapValues(function(n){if(!e||e[n]!==t[n])return t[n]}).omitBy(E.a.isNil).value()}var oe=["currentTime"],ce=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state=Object($.a)({},re(null,n.props,oe)),n.handleClose=function(){n.setState({open:!1})},n.handleClick=function(){n.setState({open:!0})},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(){this.setState(re(this.state,this.props,oe))}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.totalTime,a=e.title,o=this.state.currentTime;return r.a.createElement("div",{className:t.root},r.a.createElement(Z.a,{container:!0},r.a.createElement(Z.a,{item:!0}),r.a.createElement(Z.a,{item:!0,container:!0,direction:"column"},r.a.createElement(Z.a,{item:!0},r.a.createElement(ee.a,{onClick:this.props.onBackward},r.a.createElement(X.b,null)),r.a.createElement(ee.a,null,this.sttoped?r.a.createElement(X.e,{fontSize:"large"}):r.a.createElement(X.d,{fontSize:"large"})),r.a.createElement(ee.a,null,r.a.createElement(X.a,null))),r.a.createElement(Z.a,{item:!0},r.a.createElement(ee.a,null,r.a.createElement(X.g,null)),r.a.createElement(ee.a,null,r.a.createElement(X.f,null)))),r.a.createElement(Z.a,{container:!0,item:!0},r.a.createElement(Z.a,{item:!0,container:!0},r.a.createElement(ne.a,{variant:"subtitle2"},K(o)),r.a.createElement(ne.a,{variant:"subtitle2"},K(n)),r.a.createElement(ee.a,null,r.a.createElement(X.c,null))))),r.a.createElement(ne.a,{variant:"subtitle1"},a))}},{key:"sttoped",get:function(){return"paused"===this.props.state}}]),t}(a.PureComponent),ie=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).setInterval=function(e){n.clearInterval(),n.intervalId=setInterval(e,1e3)},n.clearInterval=function(){n.intervalId&&clearInterval(n.intervalId),n.intervalId=null},n.handleBackward=Object(A.a)(_.a.mark(function e(){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log(n.command),n.command({variables:{command:"backward",amount:10}});case 2:case"end":return e.stop()}},e,this)})),n.handleForward=Object(A.a)(_.a.mark(function e(){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.client.mutate({mutation:q()(M),variables:{command:"forward",amount:10}});case 2:case"end":return e.stop()}},e,this)})),n.handlePrev=Object(A.a)(_.a.mark(function e(){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.client.mutate({mutation:q()(M),variables:{command:"next",amount:1}});case 2:case"end":return e.stop()}},e,this)})),n.handleNext=Object(A.a)(_.a.mark(function e(){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.client.mutate({mutation:q()(M),variables:{command:"next",amount:1}});case 2:case"end":return e.stop()}},e,this)})),n.state={watch:e.watch},n.setupTimer(),n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){console.log(this.context)}},{key:"componentDidUpdate",value:function(e,t){this.props.watch.updatedAt!==t.watch.updatedAt&&(console.log("componentDidUpdate:",this.props.watch),this.setState({watch:this.props.watch}),this.clearInterval(),this.setupTimer())}},{key:"componentWillUnmount",value:function(){this.clearInterval()}},{key:"setupTimer",value:function(){}},{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement(k.Mutation,{mutation:q()(M)},function(n,a){a.data;return e.command=n&&r.a.createElement(k.Query,{query:q()(J)},function(n){var a=n.loading,o=n.error,c=n.data;if(console.log(a,o,c),a)return null;var i=c.getWatch;return r.a.createElement(ce,{classes:t,title:i.title,currentTime:i.timestamp,totalTime:i.totalTime,state:i.state,onBackward:e.handleBackward,onForward:e.handleForward,onPrev:e.handlePrev,onNext:e.handleNext})})})}}]),t}(a.Component),le=Object(ae.withStyles)(function(e){return{root:{textAlign:"center",paddingTop:20*e.spacing.unit}}})(ie),se=n(259),ue=Object(ae.createMuiTheme)({palette:{primary:se.red,secondary:se.blue},typography:{useNextVariants:!0}}),pe=window.chrome;f.a.configure(C),f.a.configure(U);var me=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(O.a,null,r.a.createElement("div",{className:"App"},L,r.a.createElement(j.a,{path:"/controller",component:le})))}}]),t}(a.Component),de=Object(w.withAuthenticator)(function(){return r.a.createElement(d.a,{theme:ue},r.a.createElement(me,null))},!0,[r.a.createElement(F,null),r.a.createElement(w.FederatedSignIn,null)],{}),he=function(){return r.a.createElement(k.ApolloProvider,{client:x},r.a.createElement(b.Rehydrated,null,r.a.createElement(de,null)))},fe=new h.Logger("Alexander_the_auth_watcher");fe.onHubCapsule=function(e){switch(D.log(e),E.a.get(pe,"runtime,reload",function(){})(),e.payload.event){case"signIn":fe.error("user signed in");break;case"signUp":fe.error("user signed up");break;case"signOut":fe.error("user signed out");break;case"signIn_failure":fe.error("user sign in failed");break;case"configured":fe.error("the Auth module is configured")}},h.Hub.listen("auth",fe),c.a.render(r.a.createElement(he,null),document.getElementById("root"))}},[[5710,2,1]]]);
//# sourceMappingURL=main.28cee9f9.chunk.js.map